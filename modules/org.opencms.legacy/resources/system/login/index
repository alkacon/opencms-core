<?xml version="1.0" encoding="ISO-8859-1"?>
<!--

File   : $Source: /usr/local/cvs/opencms/etc/ocsetup/vfs/system/login/index,v $
Date   : $Date: 2003/04/08 11:50:01 $
Version: $Revision: 1.6 $
 
Template for the OpenCms login screen.

The localization Strings are read from the standard workplace Java ResourceBundles. 
If you make changes to the resources you must restart OpenCms. This is so because the standard Java 
ResourceBundle mechanism caches all bundles once it has read them and there is no standard way 
(at last that I know of) to clear this cache. 

Author :  Alexander Kandzior (a.kandzior@alkacon.com)

-->
<XMLTEMPLATE>

<TEMPLATE>
<![CDATA[
<html>
<head>

<title>]]><METHOD name="getTitle"/><![CDATA[</title>
<meta http-equiv="Content-Type" content="text/html; charset=]]><METHOD name="getEncoding"/><![CDATA[">

<!-- Begin Styles and Scripts -->
<style type="text/css">
<!--
body { color: #000000; font-family: sans-serif; font-size: 11px; }
p { font-family: sans-serif; font-size: 11px; text-indent: 15px; }
td.head { background-color: #000066; color: white; font-family: sans-serif; font-size: 11px; font-weight: bold; }
td.dialogtxt { background-color: #c0c0c0; color: #000000; font-family: sans-serif; font-size: 11px; font-weight: normal; }
td.formular { background-color: #c0c0c0; color: black; font-family: sans-serif; font-size: 11px; font-weight: bold; }
input.textfeld { background-color: white; color: black; font-family: sans-serif; font-size: 11px; font-weight: normal; height: 20px; width: 150px }
input.button { color: black; font-family: sans-serif; font-size: 11px; font-weight: normal; width: 100px; }
-->
</style>

<script language="JavaScript" type="text/javascript" SRC="]]><LINK>version.js</LINK><![CDATA["></script>
<script language="JavaScript">
<!--
function simpleEscape(text) {
    return text.replace(/\//g, "%2F");
}

function encodeUrl(url) {
    encodedurl = url
    asteriskIdx = url.indexOf("?");
    if(asteriskIdx > -1 && asteriskIdx < (url.length-1)) {
        encodedurl = url.substring(0, asteriskIdx) + "?" + simpleEscape(url.substring(asteriskIdx + 1));
    }
    return encodedurl;
}

var workplace;
function openwin(url, name, w, h) //opens a new window with parameter URL, Windowname (free choosable), width and height
{
    if (url != '#') {
        if(w==0) w=screen.availWidth-20;
        if(h==0) h=screen.availHeight-100;
        encodedurl = encodeUrl(url);
        workplace = window.open(encodedurl, name, 'toolbar=no,location=no,directories=no,status=yes,menubar=0,scrollbars=yes,resizable=yes,width=' + w + ',height=' + h);
        workplace.moveTo(0,0);
        if(workplace != null) {
              if (workplace.opener == null)
              {
                 workplace.opener = self;
              }
              workplace.focus();
        }        
    }
    return workplace;
}

function init() {  
	if(navigator.appName.substring(0,9) == "Microsoft") {
		document.LOGIN.OPENCMSUSERNAME.focus();
	} 
}

function login() {
   	openwin(']]><METHOD name="workplaceUri"/><![CDATA[', 'opencms]]><PROCESS>windowId</PROCESS><![CDATA[', 0, 0); 
    if(window.name != 'opencms]]><PROCESS>windowId</PROCESS><![CDATA[') {
    	window.close();
	}
}
 
// -->
</script>

</head>

<!-- Begin content login -->
<body bgcolor="#ffffff" marginwidth="0" marginheight="20" leftmargin="0" topmargin="20" ]]><PROCESS>onload</PROCESS><![CDATA[>

<form action="]]><LINK>index.html?login=true</LINK><![CDATA[" method="post" name="LOGIN">
<center>
<table border="0" cellspacing="0" cellpadding="0" align=center height="100">
    <tr>
        <td><img alt="OpenCms" border="0" hspace="0" src="]]><LINK>login_logo.gif</LINK><![CDATA["></td>
    </tr>
</table>

<table cellspacing="0" cellpadding="0" border="2">
<tr><td><table cellspacing="0" cellpadding="5" border="0" width="100%" height="100%">
        <tr> 
            <td class="head" colspan="2">]]><METHOD name="message">login.title</METHOD><![CDATA[</td>                  
        </tr>
        <tr> 
            <td class="dialogtxt" colspan="2"> 
            ]]><METHOD name="message">login.message1</METHOD><![CDATA[<br>
            ]]><METHOD name="message">login.message2</METHOD><![CDATA[
            </td>
        </tr>
        <tr>
            <td class="formular" width="35%">]]><METHOD name="message">login.username</METHOD><![CDATA[:</td>
            <td class="formular"><input class="textfeld" value="" size="15" maxlength="64" name="OPENCMSUSERNAME"></td>
        </tr>
         <tr>
            <td class="formular">]]><METHOD name="message">login.password</METHOD><![CDATA[:</td>   
            <td class="formular"><input type ="password" class="textfeld" size="15" maxlength="32" name="OPENCMSPASSWORD"></td>
        </tr>
        <tr>
            <td class="formular" colspan="2" align="middle"><input type="submit" class="button" width="100" value="]]><METHOD name="message">login.button</METHOD><![CDATA["></td>
        </tr>
        </table>    
</td></tr>
</table>

<script language="JavaScript">
<!--
    if(version != "]]><METHOD name="version"/><![CDATA[") {
        document.write('<p>&nbsp;<p><table cellpadding="5"><tr><td align="right" bgcolor="#ff6666"><font size="2" color="white">');
        document.write('<b>]]><METHOD name="message">login.warning</METHOD><![CDATA[</b><p><b>Workplace:</b> ' + version + '<br><b>Classes:</b> ]]><METHOD name="version"/><![CDATA[');
        document.write('</font></td></tr></table>');
    }
// -->    
</script>
</center>
<input type="hidden" name="startTaskId" value="]]><PROCESS>startTaskId</PROCESS><![CDATA[">
<input type="hidden" name="startProjectId" value="]]><PROCESS>startProjectId</PROCESS><![CDATA[">
</form>

</body>
</html>

]]>
</TEMPLATE>

</XMLTEMPLATE>
