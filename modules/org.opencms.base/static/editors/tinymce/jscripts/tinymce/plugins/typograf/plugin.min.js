tinymce.PluginManager.requireLangPack("typograf");
tinymce.PluginManager.add("typograf",function(c,f){function k(a,b){Array.isArray(b)&&b.forEach(function(b){a.addSafeTag(b[0],b[1])})}function l(a){Array.isArray(a)&&a.forEach(function(a){return Typograf.addRule(a)})}function m(a,b){Array.isArray(b)&&b.forEach(function(b){a.setSetting(b[0],b[1],b[2])})}function n(a,b){Array.isArray(b)?b.forEach(function(b){a.enableRule(b)}):a.enableRule(b)}function p(a,b){Array.isArray(b)?b.forEach(function(b){a.disableRule(b)}):a.disableRule(b)}var g=new tinymce.dom.ScriptLoader,
d,h=function(){d&&(c.setContent(d.execute(c.getContent())),c.undoManager.add())},a={},e;(e=tinymce.activeEditor.settings.typograf)&&(a=e);e=["ru","en-US"];var q={};a.locale||(a.locale=e);a.htmlEntity||(a.htmlEntity=q);g.add(f+"/dist/typograf.all.min.js");g.loadQueue(function(){a.addRule&&l(a.addRule);d=new Typograf({locale:a.locale,htmlEntity:a.htmlEntity});a.addSafeTag&&k(d,a.addSafeTag);if(a.enableRule){var e=a.enableRule,b=c.dom.create("link",{rel:"stylesheet",href:f+"/dist/typograf.css"});Array.isArray(e)&&
-1!==e.indexOf("ru/optalign/*")&&c.getDoc().getElementsByTagName("head")[0].appendChild(b);n(d,a.enableRule)}a.disableRule&&p(d,a.disableRule);a.setSetting&&m(d,a.setSetting)});c.ui.registry.addButton("typograf",{icon:"quote",tooltip:"Typography",onAction:h});c.ui.registry.addMenuItem("typograf",{text:"Typography",icon:"quote",onAction:h});return{getMetadata:function(){return{name:"Typography",url:"https://github.com/Dominus77/typograf"}}}});
