<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=<%= wp.getEncoding() %>">
<title>(<%= wp.getSettings().getUser().getName() %>) - <%= wp.getParamResource() %></title>

<link rel=stylesheet type="text/css" href="<%= wp.getSkinUri() %>files/css_workplace.css">
<script type="text/javascript" src="<%= cms.link("../../../scripts/opencms.js") %>"></script>
<script type="text/javascript">
<!--

	<!-- Sets the Document Source-Code for later including into the editor -->
	var text="<%= wp.getParamContent() %>";

	<!-- Workplacepath needed in included javascript files -->
	var workplacePath="<%= cms.link("/system/workplace/") %>";
	
</script>

<script type="text/javascript" src="<%= wp.getEditorResourceUri() %>scripts/edit.js"></script>

<!-- Ask user whether he really wants to leave Texteditor without saving -->
<script type="text/javascript">
<!--
	function confirmExit()
	{
		if (confirm ("<%= wp.key("editor.message.exit") %>")) {
			doNsEdit(1);
		}
	}
	
	function opensmallwin(url, name, w, h) {
		encodedurl = encodeURI(url);
		smallwindow = window.open(encodedurl, name, 'toolbar=no,location=no,directories=no,status=no,menubar=0,scrollbars=yes,resizable=yes,top=150,left=660,width='+w+',height='+h);
		if(smallwindow != null) {
			if (smallwindow.opener == null) {
				smallwindow.opener = self;
		}
		}
		return smallwindow;
	}	
//-->
</script>

</head>
<body class="buttons-head" unselectable="on" onload="setText();">

<table cellspacing="0" cellpadding="0" border="0" width="100%" height="100%">
<form name="EDITOR" id="EDITOR" method="post" action="<%= wp.getDialogUri() %>">
<input type="hidden" name="content">
<input type="hidden" name="action" value="<%= wp.getParamAction() %>">
<input type="hidden" name="resource" value="<%= wp.getParamResource() %>">
<input type="hidden" name="noactivex" value="<%= wp.getParamNoactivex() %>">
<input type="hidden" name="editastext" value="<%= wp.getParamEditastext() %>">
<input type="hidden" name="directedit" value="<%= wp.getParamDirectedit() %>">
	<tr>
		<td>

<%= wp.buttonBar(wp.HTML_START) %>
<%= wp.buttonBarStartTab(0, 5) %>
<%= wp.button("javascript:doNsEdit(2);", null, "save_exit", "button.saveclose", buttonStyle) %>
<%= wp.button("javascript:doNsEdit(3);", null, "save", "button.save", buttonStyle) %>
<%
if (wp.isHelpEnabled()) {%>
	<%= wp.buttonBarSeparator(5, 5) %>
	<%= wp.button("javascript:treewin=opensmallwin(workplacePath + 'help/" + wp.getSettings().getLanguage() + "/" + wp.key("help.pageeditor") + "', '" + wp.key("button.help") + "', 600, 450);treewin.focus();", null, "help", "button.help", buttonStyle) %><%
} %>
<td class="maxwidth">&nbsp;</td>
<%= wp.button("javascript:confirmExit();", null, "exit", "button.close", buttonStyle) %>
<%= wp.buttonBarSpacer(5) %>
<%= wp.buttonBar(wp.HTML_END) %>

	</td>
</tr>
<tr>
	<td class="texteditor" height="100%" width="100%">
	<!-- write the text area -->
	<script type="text/javascript">
	<!--
		str = '<textarea wrap="off" name="edit1" onfocus="setTextDelayed();" style="width:100%; height:100%; font-family:Fixedsys, monospace"></textarea>';
		document.write(str);
	//-->
	</script>
	</td>
	</tr>
</form>
</table>
</body>
</html>