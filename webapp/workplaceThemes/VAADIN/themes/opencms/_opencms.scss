@function opencms-color-stops($color) {
	$opacity: 100%;
	$start: blend-overlay(rgba(#fff, $opacity/100%), $color);
	$end: $color;
	@return $start 2%, $end 98%;
}

@mixin o-visible-scrollbars {
	/* Makes OSX and iOS scrollbars always visible */	
	::-webkit-scrollbar {
		-webkit-appearance: none;
	}
	::-webkit-scrollbar:vertical {
		width: 11px;
	}
	::-webkit-scrollbar:horizontal {
    	height: 11px;
	}
	::-webkit-scrollbar-thumb {
    	border-radius: 8px;
    	border: 2px solid white; /* should match background, can't be transparent */
    	background-color: rgba(0, 0, 0, .5);
	}
	::-webkit-scrollbar-track { 
    	background-color: #fff; 
    	border-radius: 8px; 
	}
}

@mixin o-workplace-form-wide {
	.o-formlayout-workplace-main { 
		.v-formlayout-row .v-formlayout-captioncell {
			width: 20% !important;   
		}
		
		.v-formlayout-row .v-formlayout-contentcell {
			width: 80% !important;   
		}
	}
}

@mixin o-workplace-form-narrow {
	.o-formlayout-workplace-main { 
		.v-formlayout-row .v-formlayout-captioncell {
			display: inline-block;  
			margin-left: 0px !important; 
			padding-left: 0px !important;
		}
			
		.v-formlayout-row .v-formlayout-errorcell {
			display: inline-block;
			margin-left: 0px !important;   
		}
			
		.v-formlayout-row .v-formlayout-contentcell {
			display: block;  
		}
			
		tr.v-formlayout-row { 
			display: block;
			padding-left: 8px;
			padding-right: 8px;
		}
			
		.v-formlayout-row > td {
			padding-top: 0px !important;
		}
	}
}

@mixin opencms {
	@include valo;
  
	.v-Notification.error {
		@include valo-notification-error-style(v-Notification);
		
	}
	
	div.v-Notification {
		@include valo-notification-closable-style(v-Notification);
		&:after{
			top: 20px;
		}
		max-width: 600px;
		
		.v-Notification-caption{
			white-space: normal;
		}
	}
	
	div.v-label-success, div.v-label-failure{
		font-size: $v-font-size;
		padding-left: 10px;
		padding-right: 40px;
		
		&:before{
			position: absolute;
			top: 6px;
			right: 15px;
			font-size: 32px;
			margin: 0;
		}
	}
  
	/* Overrides to the valo theme */
	div.v-panel-caption {
		@include valo-panel-caption-style($o-dark-background-color);
	}
	
	div.v-panel-v-disabled{
		background: $o-medium-background-color;
	}

	.v-formlayout .v-caption{
		font-size: $v-font-size;
	}
	
	/* Making scroll bars always visible on combo box selects */
	.v-filterselect-suggestpopup{
	 	 @include o-visible-scrollbars;
	}
  
	/* Fix for disabled menu items - especially for non-collapsible table columns. */
	.gwt-MenuItem span.v-disabled {
		display: none;
	}
	
	/* Toolbar menu pointy corner */
	div.o-toolbar-menu-corner{
		width: 40px;
		height: 10px;
		top: -14px;
		position: absolute;
		overflow: hidden;
		&:after {
			content: "";
			top: 8px;
			height: 40px;
			width: 40px;
			position: absolute;
			transform: rotate(45deg);
			background: $v-window-background-color;
		}
	}

	div.v-window {
		max-height: 95%;
		.v-window-header, .v-window-closebox, .v-window-maximizebox, .v-window-restorebox {
			background-color: transparent;
			font-weight: bold;
			color: $gray-lighter;
			font-size: $v-font-size--large;
		}
		.v-window-closebox:hover, .v-window-maximizebox:hover, .v-window-restorebox:hover {
			color: $v-selection-color;
		}
		.v-window-outerheader{
			@include  linear-gradient(to bottom, opencms-color-stops($v-window-background-color), $v-window-background-color);
			
			&:after{
				border: none;
			}
		}
 	 
		.o-dialog > .v-spacing, .o-dialog > .v-expand> .v-spacing {
			height: $o-layout-window-margin;
		}
 	 
		.o-dialog-content, .v-window-contents > .v-scrollable > .o-dialog {
			padding: $o-layout-window-margin;
		}
	}
	
	/* In case the window height is set explicitly, force dialog content height to 100% */
	.v-window[style~="height:"] .o-dialog{
		height: 100% !important;
	}
  
	div.o-full-width-padding {
		display: block;
		width: auto !important;
		padding: 2px;
	}
  
	.o-reduced-spacing > .v-spacing{
		height: $o-layout-reduced-spacing;
		width: $o-layout-reduced-spacing;
	}
	
	.o-spacing-5 > .v-spacing { 
		height: 5px;
		width: 5px; 
	}
  
	.v-panel-content > .v-margin-left.o-reduced-margin {
		padding-left: $o-layout-reduced-margin;
	}
  
	.v-panel-content > .v-margin-top.o-reduced-margin {
		padding-top: $o-layout-reduced-margin;
	}
  
	.v-panel-content > .v-margin-right.o-reduced-margin {
		padding-right: $o-layout-reduced-margin;
	}
  
	.v-panel-content > .v-margin-bottom.o-reduced-margin {
		padding-bottom: $o-layout-reduced-margin;
	}
  
	.o-responsive{
		display: block;
		background: $v-app-background-color;
	}
  
	.o-state-deleted {
		text-decoration: line-through;
	}
  
	.o-state-changed {
		color: $o-state-changed-color;
	}
  
	.o-state-new {
		color: $o-state-new-color;
	}
  
	.o-project-other {
		color: $o-state-other-project-color;
	}
	
	.o-expired {
		font-style: italic;
	}
  
	.v-formlayout.o-form-less-margin{
		@include valo-formlayout-margin(14px);
	}
  
	.o-responsive[width-range~="1241px-"]{
		/* big screen styles */
		.o-toolbar{
			.o-toolbar-items-left, .o-toolbar-items-right{
				width: 500px;
			}
		}
		@include o-workplace-form-wide;
	}
  
	.o-responsive[width-range~="0-983px"]{
		/* small screen styles */
		@include o-workplace-form-narrow;
 	
		.o-toolbar{
			.o-toolbar-items-left, .o-toolbar-items-right{
				width: 250px;
			}
			div.o-toolbar-center {
				span.o-toolbar-logo{
					display: none;
				}
			}
		}
	}
  
	.o-responsive[width-range~="984px-1240px"]{
		/* medium screen styles */
		@include o-workplace-form-wide;
  	
		.o-toolbar{
			.o-toolbar-items-left, .o-toolbar-items-right{
				width: 350px;
			}
		}
	}
  
	.o-resource-icon{
		display: inline-block;
		height: 32px;
		width: 32px !important;
		position: relative;
		padding: 4px !important;
		box-sizing: border-box;
		vertical-align: middle;
		
		.o-icon-overlay, .o-page-icon-overlay{
			display: block;
			height: 16px;
			width: 16px;
			position: absolute;
			z-index: 2;
		}
		.o-icon-overlay{
			top:10px;
			left: 10px;
		}
		
		.o-page-icon-overlay{
			top: 13px;
			left: 16px;
		}
		 	
		.o-lock-shared, .o-lock-user, .o-lock-other, .o-lock-publish, .o-state-changed, .o-state-new, .o-sibling{
			position: absolute;
			background-size: 16px 16px;
			height:16px;
			width: 16px;
			color: transparent;
			z-index:2;
		}
		.o-lock-shared, .o-lock-user, .o-lock-other, .o-lock-publish{
			bottom: 0;
			right: 0;
		}
		.o-lock-shared{
			background-image: url(img/lock-shared.svg);
		}
		.o-lock-user{
			background-image: url(img/lock-own.svg);
		}
		.o-lock-other{
			background-image: url(img/lock-other.svg)
		}
		.o-lock-publish{
			background-image: url(img/lock-publish.svg);
		}
		.o-sibling{
			bottom: 0;
			left: 0;
			background-image: url(img/overlay-sibling.svg);
		}
		.o-state-changed, .o-state-new {
			background-image: url(img/overlay-changed.svg);
			top: 0;
			right: 0;
		}
	}
	.o-app-info{
		display: block;
		width: 100%;
		height: 45px;
		padding: 0 12px;
		border-bottom: valo-border($border: $v-border, $color: $v-app-background-color, $strength: 1);
	}
	
	.o-app-content{
		display: block;
		background: $v-background-color;
	}
	 
	.o-main{
		position: absolute;
		top: $toolbar-height;
		left: 0;
		right: 0;
		bottom: 0;
		/* override the size-full setting required by vaadin layout manager */
		height: auto !important;
	}
	
	.o-hidden-toolbar .o-main {
		top: 0;
	}
	
	/* Toolbar drop down */
	.v-popupview.v-popupview-o-navigator-dropdown{
		color: inherit;
	}
	
	.v-popupview-popup-o-navigator-dropdown{
		margin-top: 55px !important;
		margin-left: -10px !important;
		border: 4px solid $v-window-background-color;
	}
	
	.v-popupview-popup-o-navigator-dropdown .popupContent{
		max-width: 352px;
	}
	
	/* Resource info box */ 
	.v-panel.o-resource-info{
		@include linear-gradient(to bottom, $v-app-background-color 0%, $v-app-background-color 48%, $o-medium-background-color 52%, $o-medium-background-color 100%);
			
		.v-panel-content-o-resource-info > .v-horizontallayout {
			padding-left: 4px;
		}
	}
	
	
	.o-resourceinfo-directlink .o-resinfo2 {
		 @include linear-gradient(to bottom,#fffae8 0%,#fffae8 48%,#fbdaac 52%,#fbdaac 100%);
	}
	
	*[location="buttonContainer"] > * > * > .o-resinfo2 {
		margin-top: -1px; 
	}
	
	
	.o-resinfo2 {
		 border: 1px solid #ccc; 
		 border-radius: 4px; 
		 @include linear-gradient(to bottom, $v-app-background-color 0%, $v-app-background-color 48%, $o-medium-background-color 52%, $o-medium-background-color 100%);
		 height: 38px;
		 display: -ms-flex;
		 display: flex;
		 
		 .o-resinfo-top, .o-resinfo-bottom {
			vertical-align: middle;
			line-height: 17px;
			font-face: Open Sans,sans-serif;
			color: $v-font-color;
		}
	
		.o-resinfo-top > *, .o-resinfo-bottom > * {
			white-space: nowrap;
			overflow: ellipsis;  
		}
		
		.o-resource-icon {
			margin-top: 2px;
		}
		
		.o-resource-icon.o-notranslation {
			color: $alkacon-red; 
			font-size: 24px;
			margin-top: -10px; 
		}
	
		.o-resinfo-top {
		  font-size: 14px;
		  font-weight: bold;
		}
	
		.o-resinfo-bottom {
		  font-size: 12px;
		}
		
		.o-resourceinfo-toolbar {
			visibility: hidden; 
			color: #888888; 
		}
		
		.o-resourceinfo-toolbar:hover, .o-resourceinfo-toolbar:hover * { 
			color: $v-font-color !important; 
		}
		
		.o-resourceinfo-toolbar:hover .v-menubar.v-menubar-o-toolbar-button > .v-menubar-menuitem:hover { 
			color: inherit; 
		}
		
		.o-resourceinfo-toolbar * {
			font-size: 24px !important;
		}
		
		&:hover .o-resourceinfo-toolbar { 
			visibility: visible !important; 
		}
		
		.o-resinfo-lines {
			overflow: hidden;
			flex: 1;
			padding-left: 5px; 
			margin-top: 1px;
		}
		
		.o-resinfo-hidden-icon {
			margin-top: 8px;
			margin-right: 10px;
		}
		
	 }
	 
	 .o-resourceinfo-weak .o-resinfo2 {
	 	opacity: 0.4;
	  
	 } 
	 		
	.o-resinfo2:hover .o-resinfo-hidden-icon {
		visibility: visible; 
    }
    
    .o-resinfo2 .o-resinfo-hidden-icon {
    	cursor:pointer;
    }
    
    .v-menubar-menuitem-o-sitemap-notranslation {
      &, & * { 
      	visibility: visible !important;
      	color: orange !important; 
      }
    }
    
    .o-sitemap-notranslation { 
    	color: orange !important;  
    	font-size: 20px !important; 
    	margin-top: 9px; 
    }
    
    .o-pointer { 
    	cursor: pointer; 
    }
    
    
    .o-sitemap-tree-node-content .v-menubar-menuitem {
    	min-width: 24px !important;
    	padding-left: 0px !important;
    	padding-right: 0px !important;  
    	&, & * { 
    		font-size: 20px !important; 
    	}
    }
    
    .o-locale-linkmode-bar { 
    	.v-button::after { 
    		display:none !important;
    	}
    }
    
    .o-sitemap-tree-node-content .v-menubar.v-menubar-o-toolbar-button {
    	padding-left: 6px;
    	padding-right: 6px;
    }
    
    .o-sitemap-locale-bar {
    
    	padding-left: 42px;
    	 
    	.v-filterselect { 
    		margin-right: 30px;
    		vertical-align: middle;
    	} 
    	
    	.v-caption {
    		.v-captiontext {  
    			vertical-align: middle;
				font-size: 16px;  
				line-height: normal; 
    		}
    		margin-right: 10px; 
    		position: relative;
    		margin-top: -1px;
    	}
    }
    
    
     
    	
    
	  
	/* explorer bread crumb path input styles */
	.o-crumb-wrapper{
		position: relative;
			
		.o-crumbs {
			position: absolute;
			top:0;
			left: ceil($v-unit-size/6 + 2);
		
			.v-button-link {
				padding: 0 2px;
				color: $v-font-color;
				text-decoration: none;
				
				&:hover {
					color: lighten($v-link-font-color, 10%);
				}
							
				&:focus:after {
					box-shadow: none;
					border-color: transparent;
				}
			}
					
			&.o-crumbs-hidden{
				display: none;
			}
		}
		
		.v-textfield {
			color: transparent;
			transition: color 0.1s ease-in-out;
			
			&:focus {
				color: $v-font-color;
				transition: color 0.3s ease-in-out;
			}
		}
	}
	
	/* login form styles */
	.cmslogin-parent .cmslogin-box { 
		position: absolute;
		left: 0;
		right: 0;
		top:0;
		bottom: 0;
		
		.o-dialog-button-bar .v-button {
  			min-width: 150px;
		}
	}
	 
	.cmslogin-form {
		height: 100%;
	} 
	
	.o-login-form .o-login-logo{
		text-align: center;
		
		> span {
			vertical-align: top;
			display: inline-block;
  			height: 42px;
  			width: 170px;
  			background: $o-opencms-logo;
		}
	}
	 
	div.o-upload-drop{
		position: relative;
		background-color: $v-selection-color;
			
		> * {
			opacity: 0.6;
		}
	}
	 
	/* fixes tooltip issues */
	.v-tooltip {
		z-index: 20001 !important;
	}
	
	.o-fake-window .v-window-outerheader {
		float: left; 
		position: static;
		width: 100%;
		border-radius: 4px; 
		 	
		&:after {
			border: none !important;  
		}
	}
	  
	@for $i from 1 through 40 {
		.o-max-height-#{$i*20} {
			max-height: 0px + ($i*20);
			overflow-y: auto;
		}
	}
	  
	.login-dialog { 
		background: $v-background-color;
	}
	  	
	.v-label.o-label-error { 
		color: $red; 
	}
	  	
	.o-dialog-form { 
		.v-formlayout-row .v-formlayout-captioncell {
			width: 20% !important;   
		}
					
		.v-formlayout-row .v-formlayout-contentcell {
			width: 80% !important;   
		}
	}
	
	.o-error-dialog{
		.o-error-icon{
			padding-left: 12px;
			color: $red;
			font-size: 36px;
		}
		.o-warning-icon{
			padding-left: 12px;
			color: $orange;
			font-size: 36px;
		}
		.o-error-message {
			white-space: normal;
		}
		.o-error-details{
			position: relative;
		
			pre {
				white-space: pre-wrap;
				padding: 0 5px;
			}
		}
		.o-hidden {
			display: none;
		}
	}
	
	.o-resource-info-horizontal {
		& > .v-spacing, & > .v-expand > .v-spacing { 
			width: 6px;
		}
	}

	.o-workplace-maxwidth {
		max-width: 1200px; 
	}
		
	.o-resource-info:hover .o-resinfo-hidden-icon {
		visibility: visible; 
	}
		
	.o-resinfo-hidden-icon {
		visibility: hidden; 
	}
		
	.o-resinfo-pointer .o-resource-info:hover {
		cursor: pointer; 
	}
	
	.o-resource-info-title {
		margin-top: -1px;
		overflow: hidden;
		text-overflow: ellipsis;
		word-break: keep-all; 
	}
	
	.o-resource-info-subtitle {
		margin-top: -1px;
	}
	
	.o-quicklaunch > .v-slot {
		margin-bottom: 10px; 
	}
	
	
	.o-sitemap-tree-node { 
		display: flex;
		margin-top: 2px;
		
		.o-sitemap-tree-node-right {
			-ms-flex: 1; 
			flex: 1; 
			min-width: 0px;
		}
		
		.o-sitemap-tree-node-children { 
			display: block;
			padding-left: 4px;
		}
		
		.v-button:focus:after { 
			box-shadow: none;
		}
	
		.o-sitemap-tree-opener {
			margin-top: 10px;
			color: #888888 !important;
			&:hover { 
				color: #474747 !important; 
			} 
		}
	}
	
	.v-button.o-button-invisible { 
		visibility: hidden; 
	}
	
	
	.v-tree-node-caption-o-locale-link-target-alredy-linked { 
		color: orange;
	}
	
	.v-tree-node-caption-o-locale-link-notranslation { 
		font-weight: 100;
		color: #afafaf;
	}
	
	
	.v-tree-node-caption-o-locale-link-target-other { 
		font-weight: 100;
		color: #afafaf; 
	}
	
	.o-show-locale-disabled {
		color: #afafaf !important;
	} 
		
	
	
	
	
		
	
	/* history compare dialog styles */
	
	div.df-add {
		font-family: monospace;
		font-size: 12px;
		background-color: #ccffcc;
		border-left: 4px solid darkgreen;
		display: inline;
	}
	div.df-rem {
		font-family: monospace;
		font-size: 12px;
		background-color: #fdc6c6;
		border-left: 4px solid darkred;
		display: inline;
	}
	div.df-skp {
		font-family: monospace;
		font-size: 12px;
		background-color: #fdfdc6;
		border-left: 4px solid olive;
		display: inline;
	}
	div.df-unc {
		font-family: monospace;
		font-size: 12px;
		border-left: 4px solid lightgrey;
		display: inline;
	}
	span.df-add {
		font-family: monospace;
		font-size: 12px;
		background-color: #58ff87;
	}
	span.df-rem {
		font-family: monospace;
		font-size: 12px;
		background-color: #ff8686;
		text-decoration: line-through;
	}
	span.df-unc {
		font-family: monospace;
		font-size: 12px;
	}
	
	.diffTypeChanged {
		 
	} 
	
	.diffTypeUnchanged {
		color: lightgray;  
	}
	
	.diffTypeAdded {
		color: green;  
	}
	
	.diffTypeDeleted { 
		color: red; 
	}

	.v-formlayout .o-form-row div.v-caption{
		position: absolute;
		top: 0;
		left: -($v-font-size + 2);
	}
	
	.o-security{
		position:relative;
		&:after{
			font-family: opencms-font;
    		font-size: 16px;
		    position: absolute;
    		right: 6px;
		    top: 2px;
		}
		&.o-security-invalid:after{
			content: "\ed50";
			color: $red;
		}
		&.o-security-weak:after{
			content: "\e61f";
			color: $orange;
		}
		&.o-security-strong:after{
			content: "\e61f";
			color: $green;
		}
		div.v-caption{
			position: absolute;
			top: 0;
			left: -($v-font-size + 2);
		}
	}

	.o-wrap-table .v-table-cell-wrapper {
		white-space: normal !important; 
	}
	
	.o-wrap-table .v-table-body-wrapper {
		overflow-y: auto !important;
	}
	
	.o-table-image { 
		max-width: 200px; 
		max-height: 200px;
		width: auto;
		height: auto;
		display: block; 
	}
	
	.o-table-cell-padding .v-table-cell-wrapper { 
		padding: 10px 10px; 
	}
	 
}
